load("C:/Users/student/Desktop/zajecia 1.Rmd")
options(max.print = 100)
schorzenia_serca <- read.csv("heart_disease.csv")
# to jest komentarz, ignorowany przez interpreter
schorzenia_serca <- read.csv("heart_disease.csv")
# to jest komentarz, ignorowany przez interpreter
?readcsf
?read.csv
heart_disease <- read.csv("C:/Users/student/Desktop/heart_disease.csv", header=FALSE, stringsAsFactors=TRUE)
View(heart_disease)
schorzenia_serca <- read.csv("heart_disease.csv")
# to jest komentarz, ignorowany przez interpreter
# read.csv(file, header = TRUE, sep = ",", quote = "\"",
#          dec = ".", fill = TRUE, comment.char = "", ...)
#
# read.csv2(file, header = TRUE, sep = ";", quote = "\"",
#           dec = ",", fill = TRUE, comment.char = "", ...)
#
# read.delim(file, header = TRUE, sep = "\t", quote = "\"",
#            dec = ".", fill = TRUE, comment.char = "", ...)
#
# read.delim2(file, header = TRUE, sep = "\t", quote = "\"",
#             dec = ",", fill = TRUE, comment.char = "", ...)
head(schorzenia_serca)
schorzenia_serca
View(schorzenia_serca)
library(xlsx)
library(xlsx)
library(xlsx)
heart_disease_xlsx <- read.xlsx("heart_disease.xlsx",1, startRow = 3)
library(xlsx)
heart_disease_xlsx <- read.xlsx("heart_disease.xlsx",1, startRow = 3)
View(heart_disease)
View(heart_disease)
View(schorzenia_serca)
View(schorzenia_serca)
summary(schorzenia_serca)
read.csv
?read.csv
schorzenia_serca <- read.csv("heart_disease.csv",stringsAsFactors = TRUE)
# to jest komentarz, ignorowany przez interpreter
summary(schorzenia_serca)
colnames(schorzenia_serca)
colnames(schorzenia_serca) <-
c(
"Gender",
"Age",
"Education",
"CurrentSmoker",
"CigsPerDay",
"BPMeds",
"PrevalentStroke",
"PrevalentHyp",
"Diabetes",
"TotChol",
"SysBP",
"DiaBP",
"BMI",
"HeartRate",
"Glucose",
"HeartStroke"
)
schorzenia_serca
nrow(schorzenia_serca)
ncol(schorzenia_serca)
row.names(schorzenia_serca)
head(schorzenia_serca, n=3)
tail(schorzenia_serca, n=3)
#schorzenia_serca$Gender
schorzenia_serca$Gender[1:20]
class(schorzenia_serca$Gender[1:20])
5:20
schorzenia_serca$Age
typeof(schorzenia_serca$Age)
schorzenia_serca$SysBP
typeof(schorzenia_serca$SysBP)
c("text", "tekst")
typeof(c("text", "tekst"))
c(2==2,2==4)
c(TRUE, FALSE, T, F)
typeof(c(TRUE, FALSE, T, F))
as.Date("2022-10-20")
class(as.Date("2022-10-20"))
is.numeric(schorzenia_serca$Age) #każdy `integer` jest `numeric`
is.integer(schorzenia_serca$Age)
is.character(schorzenia_serca$Age)
is.factor(schorzenia_serca$Age)
as.character(schorzenia_serca$Age[1:30])
as.integer("---")
#suma
sum(schorzenia_serca$CigsPerDay)
sum(schorzenia_serca$CigsPerDay, na.rm = TRUE)
#średnia
mean(schorzenia_serca$CigsPerDay, na.rm = TRUE)
sum(schorzenia_serca$CigsPerDay, na.rm = TRUE)/nrow(schorzenia_serca)
# wartość najmniejsza i największa
min(schorzenia_serca$CigsPerDay, na.rm = TRUE)
max(schorzenia_serca$CigsPerDay, na.rm = TRUE)
# kwantyle (można podać wektor ułamków lub jedną warość)
quantile(schorzenia_serca$CigsPerDay, probs=c(0.01,0.25,0.5,0.75,0.99), na.rm = TRUE)
quantile(schorzenia_serca$CigsPerDay, probs=0.75, na.rm = TRUE)
unique(schorzenia_serca$PrevalentHyp)
unique(schorzenia_serca$PrevalentStroke)
unique(schorzenia_serca$Education)
unique(schorzenia_serca$PrevalentHyp)
unique(schorzenia_serca$PrevalentStroke)
unique(schorzenia_serca$Education)
table(schorzenia_serca$PrevalentHyp)
table(schorzenia_serca$PrevalentStroke)
table(schorzenia_serca$Education)
table(schorzenia_serca$Education, useNA = "always")
table(schorzenia_serca$Education, schorzenia_serca$Gender)
table(schorzenia_serca$Education, schorzenia_serca$Gender, schorzenia_serca$PrevalentHyp)
schorzenia_serca$Age[1:10]
schorzenia_serca$Age <- schorzenia_serca$Age + 2
schorzenia_serca$Age[1:10]
schorzenia_serca[,"AgeGroup"] <- floor(schorzenia_serca$Age/10)*10
schorzenia_serca$AgeGroup <- as.integer(schorzenia_serca$AgeGroup)
schorzenia_serca[1:5,]
as.character(schorzenia_serca$AgeGroup[1:10])
as.factor(schorzenia_serca$AgeGroup)[1:10]
table(schorzenia_serca$AgeGroup)
schorzenia_serca[5,3]
schorzenia_serca[5,"Education"]
schorzenia_serca[1:4,]
schorzenia_serca[1:4,"Education"]
schorzenia_serca[1:10, c("Gender","Age","Education") ]
schorzenia_serca[1:6, c("Gender","Education","Age") ]
schorzenia_serca[ , c("Gender","Education","Age") ]
schorzenia_serca$Gender=="Female"
schorzenia_serca[schorzenia_serca$Gender=="Female", c("Gender","Age","Education") ]
wyksztalconeKobiety <- schorzenia_serca[(schorzenia_serca$Gender=="Female" & schorzenia_serca$Education=="graduate"),
c("Gender","Age","Education","PrevalentStroke") ]
wyksztalconeKobiety
write.csv(wyksztalconeKobiety, "wyksztalconeKobiety.csv") #mozna podać pełną ścieżkę do pliku
write.xlsx(wyksztalconeKobiety, "wyksztalconeKobiety.xlsx")
write.csv(wyksztalconeKobiety, "wyksztalconeKobiety.csv") #mozna podać pełną ścieżkę do pliku
write.xlsx(wyksztalconeKobiety, "wyksztalconeKobiety.xlsx")
schorzenia_serca[45:78,]
schorzenia_serca[is.na(schorzenia_serca$Education),]
nrow(schorzenia_serca[is.na(schorzenia_serca$Education),])
sum(is.na(schorzenia_serca$Education))
wszyscyZedukacją <- schorzenia_serca[!is.na(schorzenia_serca$Education),]
wszyscyZedukacją
schorzenia_serca$CigsPerDay[is.na(schorzenia_serca$CigsPerDay)] <- 0
options(max.print = 100)
schorzenia_serca <- read.csv("heart_disease.csv",stringsAsFactors = TRUE)
# to jest komentarz, ignorowany przez interpreter
?read.csv
#
# read.table(file, header = FALSE, sep = "", quote = "\"'",
#            dec = ".", numerals = c("allow.loss", "warn.loss", "no.loss"),
#            row.names, col.names, as.is = !stringsAsFactors,
#            na.strings = "NA", colClasses = NA, nrows = -1,
#            skip = 0, check.names = TRUE, fill = !blank.lines.skip,
#            strip.white = FALSE, blank.lines.skip = TRUE,
#            comment.char = "#",
#            allowEscapes = FALSE, flush = FALSE,
#            stringsAsFactors = default.stringsAsFactors(),
#            fileEncoding = "", encoding = "unknown", text, skipNul = FALSE)
#
# read.csv(file, header = TRUE, sep = ",", quote = "\"",
#          dec = ".", fill = TRUE, comment.char = "", ...)
#
# read.csv2(file, header = TRUE, sep = ";", quote = "\"",
#           dec = ",", fill = TRUE, comment.char = "", ...)
#
# read.delim(file, header = TRUE, sep = "\t", quote = "\"",
#            dec = ".", fill = TRUE, comment.char = "", ...)
#
# read.delim2(file, header = TRUE, sep = "\t", quote = "\"",
#             dec = ",", fill = TRUE, comment.char = "", ...)
head(schorzenia_serca)
schorzenia_serca
View(schorzenia_serca)
library(xlsx)
heart_disease_xlsx <- read.xlsx("heart_disease.xlsx",1, startRow = 3)
summary(schorzenia_serca)
colnames(schorzenia_serca)
c("Gender",          "age",             "education",       "currentSmoker",   "cigsPerDay",      "BPMeds",          "prevalentStroke",
"prevalentHyp",    "diabetes",        "totChol",         "sysBP",           "diaBP",           "BMI",             "heartRate",
"glucose",         "Heart_.stroke"  )
colnames(schorzenia_serca) <-
c(
"Gender",
"Age",
"Education",
"CurrentSmoker",
"CigsPerDay",
"BPMeds",
"PrevalentStroke",
"PrevalentHyp",
"Diabetes",
"TotChol",
"SysBP",
"DiaBP",
"BMI",
"HeartRate",
"Glucose",
"HeartStroke"
)
schorzenia_serca
nrow(schorzenia_serca)
ncol(schorzenia_serca)
row.names(schorzenia_serca)
head(schorzenia_serca, n=3)
tail(schorzenia_serca, n=3)
#schorzenia_serca$Gender
schorzenia_serca$Gender[1:20]
class(schorzenia_serca$Gender[1:20])
5:20
schorzenia_serca$Age
typeof(schorzenia_serca$Age)
schorzenia_serca$SysBP
typeof(schorzenia_serca$SysBP)
c("text", "tekst")
typeof(c("text", "tekst"))
c(2==2,2==4)
c(TRUE, FALSE, T, F)
typeof(c(TRUE, FALSE, T, F))
as.Date("2022-10-20")
class(as.Date("2022-10-20"))
is.numeric(schorzenia_serca$Age) #każdy `integer` jest `numeric`
is.integer(schorzenia_serca$Age)
is.character(schorzenia_serca$Age)
is.factor(schorzenia_serca$Age)
as.character(schorzenia_serca$Age[1:30])
as.integer("---")
#suma
sum(schorzenia_serca$CigsPerDay)
sum(schorzenia_serca$CigsPerDay, na.rm = TRUE)
#średnia
mean(schorzenia_serca$CigsPerDay, na.rm = TRUE)
sum(schorzenia_serca$CigsPerDay, na.rm = TRUE)/nrow(schorzenia_serca)
# wartość najmniejsza i największa
min(schorzenia_serca$CigsPerDay, na.rm = TRUE)
max(schorzenia_serca$CigsPerDay, na.rm = TRUE)
# kwantyle (można podać wektor ułamków lub jedną warość)
quantile(schorzenia_serca$CigsPerDay, probs=c(0.01,0.25,0.5,0.75,0.99), na.rm = TRUE)
quantile(schorzenia_serca$CigsPerDay, probs=0.75, na.rm = TRUE)
unique(schorzenia_serca$PrevalentHyp)
unique(schorzenia_serca$PrevalentStroke)
unique(schorzenia_serca$Education)
table(schorzenia_serca$PrevalentHyp)
table(schorzenia_serca$PrevalentStroke)
table(schorzenia_serca$Education)
table(schorzenia_serca$Education, useNA = "always")
table(schorzenia_serca$Education, schorzenia_serca$Gender)
table(schorzenia_serca$Education, schorzenia_serca$Gender, schorzenia_serca$PrevalentHyp)
schorzenia_serca$Age[1:10]
schorzenia_serca$Age <- schorzenia_serca$Age + 2
schorzenia_serca$Age[1:10]
schorzenia_serca[,"AgeGroup"] <- floor(schorzenia_serca$Age/10)*10
schorzenia_serca$AgeGroup <- as.integer(schorzenia_serca$AgeGroup)
schorzenia_serca[1:5,]
as.character(schorzenia_serca$AgeGroup[1:10])
as.factor(schorzenia_serca$AgeGroup)[1:10]
table(schorzenia_serca$AgeGroup)
schorzenia_serca[5,3]
schorzenia_serca[5,"Education"]
schorzenia_serca[1:4,]
schorzenia_serca[1:4,"Education"]
schorzenia_serca[1:10, c("Gender","Age","Education") ]
schorzenia_serca[1:6, c("Gender","Education","Age") ]
schorzenia_serca[ , c("Gender","Education","Age") ]
schorzenia_serca$Gender=="Female"
schorzenia_serca[schorzenia_serca$Gender=="Female", c("Gender","Age","Education") ]
wyksztalconeKobiety <- schorzenia_serca[(schorzenia_serca$Gender=="Female" & schorzenia_serca$Education=="graduate"),
c("Gender","Age","Education","PrevalentStroke") ]
wyksztalconeKobiety
write.csv(wyksztalconeKobiety, "wyksztalconeKobiety.csv") #mozna podać pełną ścieżkę do pliku
write.xlsx(wyksztalconeKobiety, "wyksztalconeKobiety.xlsx")
TRUE & TRUE
TRUE & FALSE
FALSE & TRUE
FALSE & FALSE
TRUE | TRUE
TRUE | FALSE
FALSE | TRUE
FALSE | FALSE
!TRUE
!FALSE
schorzenia_serca[45:78,]
schorzenia_serca[is.na(schorzenia_serca$Education),]
nrow(schorzenia_serca[is.na(schorzenia_serca$Education),])
sum(is.na(schorzenia_serca$Education))
wszyscyZedukacją <- schorzenia_serca[!is.na(schorzenia_serca$Education),]
wszyscyZedukacją
schorzenia_serca$CigsPerDay[is.na(schorzenia_serca$CigsPerDay)] <- 0
schorzenia_serca$CigsPerDay = = 9
schorzenia_serca$CigsPerDay==9
sum(schorzenia_serca$CigsPerDay==9)
palacze <- schorzenia_serca
palacze[palacze==9] <- NA
schorzenia_serca[,"HeartRate"]<- floor(schorzenia_serca$HeartRate/10)*10
schorzenia_serca[,"HeartRate"]<- floor(schorzenia_serca$HeartRate/10)*10
schorzenia_serca$HeartRate<-as.integer(schorzenia_serca$HeartRate)
schorzenia_serca[1:5,]
schorzenia_serca[,"Glucosegroup"]<-floor(schorzenia_serca$Glucose/10)*10
schorzenia_serca[,"BMIgroup"]<-floor(schorzenia_serca$BMI/5)*5
table(schorzenia_serca$Education, schorzenia_serca$Gender, schorzenia_serca$CurrentSmoker, schorzenia_serca$HeartRate, schorzenia_serca$Diabetes)
setwd("C:/Users/student/Documents/dspszew/jezyk R/materialy/zajecia4")
library(sf)
library(sf)
#woj <- st_read("C:/Users/student/Desktop/zajeciaR/wojewodztwa.shp")
wojewodztwa <- st_read("~/teaching/podyplomowe/R/2023R1zimowy/woj/wojewodztwa.shp")
library(sf)
#woj <- st_read("C:/Users/student/Desktop/zajeciaR/wojewodztwa.shp")
wojewodztwa <- st_read("wojewodztwa.shp")
wojewodztwa
woj <- wojewodztwa[,c("jpt_nazwa_", "geometry")]
woj$jpt_nazwa_
plot(woj[,"geometry"])
library(ggplot2)
ggplot(woj) + #nowy wykres i na których danych bazujemy
geom_sf() # dodanie geometrii to wykresu
ggplot(woj) +
geom_sf() +
theme_void() #upraszczamy wygląd
library(readr)
zd <- read_delim("Zdarzenia_w_ruchu_drogowym_w_2022_r._-_podział_na_województwa.csv",
delim = ";", escape_double = FALSE, locale = locale(encoding = "windows-1250"),
trim_ws = TRUE, skip = 3)
zd
zd$Województwo
library(stringi)
stri_sub(zd$Województwo, from = 6)
zd[,"NAZWAWOJ"] <- stri_sub(zd$Województwo, from = 6)
zd
tolower(zd$NAZWAWOJ)
zd[,"nazwawoj"] <- tolower(zd$NAZWAWOJ)
merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
woj.dane <- merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
woj.dane <- merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
ggplot(woj.dane) +
geom_sf() +
theme_void()
woj.dane$`Liczba Wypadkow`
ggplot(woj.dane) +
geom_sf(aes(fill=`Liczba Wypadkow`)) +
theme_void()
setwd("C:/Users/student/Documents/dspszew/jezyk R/materialy/zajecia4")
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_dpuble=False, locale=default_locale(), trim_ws=TRUE)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=False, locale=default_locale(), trim_ws=TRUE)
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=False, locale=default_locale(), trim_ws=TRUE)
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=False, locale=default_locale(), trim_ws=TRUE)
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';')
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=FALSE, locale=default_locale(), trim_ws=TRUE)
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=FALSE, locale=default_locale(), trim_ws=TRUE,skip=1)
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=FALSE, locale = locale(encoding = "windows-1250"), trim_ws=TRUE,skip=1)
dane_rej
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=FALSE, locale = locale(encoding = "windows-1250"), trim_ws=TRUE)
dane_rej
dane_rej <- dane_rej[,-c('listopad','grudzień')]
dane_rej <- dane_rej[:,-c('listopad','grudzień')]
dane_rej <- dane_rej[,c('listopad','grudzień')]
dane_rej <- dane_rej[,~c('listopad','grudzień')]
names(dane_rej)
library(readr)
dane_rej <- read_delim('Pojazdy_wg_wojewodztw_2023.csv', delim=';', escape_double=FALSE, locale = locale(encoding = "windows-1250"), trim_ws=TRUE)
names(dane_rej)
dane_rej <- dane_rej[,!names(df) %in% c('listopad','grudzień')]
dane_rej <- dane_rej[,!names(df) %in% c("listopad","grudzień")]
dane_rej <- dane_rej[,!names(dane_rej) %in% c("listopad","grudzień")]
dane_rej <- dane_rej[,!names(dane_rej) %in% c("listopad","grudzień")]
dane_rej
dane_rej <- dane_rej[,!names(dane_rej) %in% c("listopad","grudzień")]
dane_rej$WOJEWÓDZTWO <- tolower(dane_rej$WOJEWÓDZTWO)
dane_rej <- dane_rej[,!names(dane_rej) %in% c("listopad","grudzień")]
dane_rej$WOJEWÓDZTWO <- tolower(dane_rej$WOJEWÓDZTWO)
dane_rej
dane_rej <- dane_rej[,!names(dane_rej) %in% c("listopad","grudzień")]
dane_rej$WOJEWÓDZTWO <- tolower(dane_rej$WOJEWÓDZTWO)
dane_m <- merge(x=woj, y=dane_rej, by.x="jpt_nazwa_", by.y = "WOJEWÓDZTWO")
dane_m
ggplot(dane_m) +
geom_sf(aes(fill=`styczeń`)) +
theme_void() +
ggtitle("Liczba rejestraji styczeń")
dane_rej$'Liczba rejestracji'
ggplot(dane_m) +
geom_sf(aes(fill=`styczeń`)) +
theme_void() +
ggtitle("Liczba rejestraji styczeń")
ggplot(dane_m) +
geom_sf(aes(fill=`styczeń`)) +
theme_void() +
ggtitle("Liczba rejestraji styczeń") +
labs(fill='Liczba rejestracji')
ggplot(woj.dane) +
geom_sf() +
theme_void()
woj.dane <- merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
woj_dan
woj.dane <- merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
woj_dane
woj.dane <- merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
woj_dane
woj.dane <- merge(x=woj, y=zd, by.x="jpt_nazwa_", by.y="nazwawoj")
woj.dane
library(sf)
#woj <- st_read("C:/Users/student/Desktop/zajeciaR/wojewodztwa.shp")
wojewodztwa <- st_read("wojewodztwa.shp")
